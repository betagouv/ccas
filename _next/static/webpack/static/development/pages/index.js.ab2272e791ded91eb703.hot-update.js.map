{"version":3,"file":"static/webpack/static/development/pages/index.js.ab2272e791ded91eb703.hot-update.js","sources":["webpack:///./pages/index.js"],"sourcesContent":["import {useState, useCallback} from 'react'\n\nimport Layout from '../components/Layout'\nimport CommuneInput from '../components/commune-input'\n\nimport CCASForm from '../components/ccas-form'\nimport CCASView from '../components/ccas-view'\nimport fetch from 'isomorphic-unfetch'\n\nexport default function Index() {\n  const [commune, setCommune] = useState()\n  const [ccas, setCCAS] = useState()\n\n  const [fetchingCCAS, setFetchingCCAS] = useState(false)\n\n  const handleCommuneChange = useCallback(async commune => {\n    setCommune(commune);\n    setFetchingCCAS(true);\n    return fetch(`https://etablissements-publics.api.gouv.fr/v3/communes/${commune.code}/ccas`)\n      .then(response => response.json())\n      .then(response => response.features.length && response.features[0])\n      .catch(() => null)\n      .then(data => setCCAS(data))\n      .finally(() => {\n        setFetchingCCAS(false)\n      })\n  })\n\n  return (\n    <Layout>\n      <div className=\"hero\" role=\"banner\">\n        <div className=\"hero__container\">\n          <h1 className=\"hero__white-background\">üè° CCAS</h1>\n          <p className=\"hero__white-background\">Ajouter en quelques clics les informations de votre centre communal d'action sociale</p>\n        </div>\n      </div>\n\n      <section className=\"section section-white\" id=\"typography\">\n        <div className=\"container\">\n          <h2>üîç V√©rifier les informations de votre CCAS</h2>\n          <CommuneInput value={commune} onChange={handleCommuneChange} />\n        </div>\n      </section>\n\n      <section className=\"section section-white\" id=\"typography\">\n        {commune && !fetchingCCAS && (\n          (ccas &&\n              <div className=\"container\">\n                <h2>‚≠ê La vile de {commune.nom} √† un CCAS dans l'annuaire</h2>\n                <CCASView ccas={ccas} />\n              </div>\n            ) ||\n            (\n              <div className=\"container\">\n                <h2>üòü {commune.nom} ne semble pas avoir de CCAS dans l'annuaire.</h2>\n                <h3>üìù Ajoutez le&nbsp;!</h3>\n                <CCASForm commune={commune}/>\n              </div>\n            )\n          )}\n      </section>\n    </Layout>\n  )\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAIA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAaA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;;;;A","sourceRoot":""}